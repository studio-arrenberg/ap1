!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):t.Bricks=n()}(this,(function(){"use strict";var t=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},n=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=Object.create(null);function i(t,n){return e[t]=e[t]||[],e[t].push(n),this}function r(t,n){return n._once=!0,i(t,n),this}function o(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return n?e[t].splice(e[t].indexOf(n),1):delete e[t],this}function u(t){for(var n=this,i=arguments.length,r=Array(i>1?i-1:0),u=1;u<i;u++)r[u-1]=arguments[u];var c=e[t]&&e[t].slice();return c&&c.forEach((function(e){e._once&&o(t,e),e.apply(n,r)})),this}return t({},n,{on:i,once:r,off:o,emit:u})};return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=void 0,i=void 0,r=void 0,o=void 0,u=void 0,c=void 0,a=void 0,f=void 0,d=void 0,l=void 0,s=void 0,p=void 0,h=void 0,v=0===t.packed.indexOf("data-")?t.packed:"data-"+t.packed,m=t.sizes.slice().reverse(),y=!1!==t.position,g=t.container.nodeType?t.container:document.querySelector(t.container),w={all:function(){return k(g.children)},new:function(){return k(g.children).filter((function(t){return!t.hasAttribute(""+v)}))}},x=[j,q,z],O=[L,_,B,F],b=n({pack:S,update:T,resize:W});return b;function A(t){t.forEach((function(t){return t()}))}function k(t){arguments.length>1&&void 0!==arguments[1]||document;return Array.prototype.slice.call(t)}function E(t){return Array.apply(null,Array(t)).map((function(){return 0}))}function M(){return m.map((function(t){return t.mq&&window.matchMedia("(min-width: "+t.mq+")").matches})).indexOf(!0)}function j(){r=M()}function q(){o=-1===r?m[m.length-1]:m[r]}function z(){c=E(o.columns)}function L(){s=w[e?"new":"all"]()}function _(){0!==s.length&&(p=s.map((function(t){return t.clientWidth})),h=s.map((function(t){return t.clientHeight})))}function B(){s.forEach((function(t,n){u=c.indexOf(Math.min.apply(Math,c)),t.style.position="absolute",a=c[u]+"px",f=u*p[n]+u*o.gutter+"px",y?(t.style.top=a,t.style.left=f):t.style.transform="translate3d("+f+", "+a+", 0)",t.setAttribute(v,""),d=p[n],l=h[n],d&&l&&(c[u]+=l+o.gutter)}))}function F(){g.style.position="relative",g.style.width=o.columns*d+(o.columns-1)*o.gutter+"px",g.style.height=Math.max.apply(Math,c)-o.gutter+"px"}function H(){i||(window.requestAnimationFrame(P),i=!0)}function P(){r!==M()&&(S(),b.emit("resize",o)),i=!1}function S(){return e=!1,A(x.concat(O)),b.emit("pack")}function T(){return e=!0,A(O),b.emit("update")}function W(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=t?"addEventListener":"removeEventListener";return window[n]("resize",H),b}}}));